<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relational Integration Task - Exact Replication</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <h1>Relational Integration Task</h1>
            <div class="info-box">
                <h2>Exact Replication of Chuderski (2013)</h2>
                <p>This is a faithful implementation of the relational integration task from:</p>
                <p class="citation"><em>Chuderski, A. (2013). The relational integration task explains fluid reasoning above and beyond other working memory tasks. Memory & Cognition, 42(3), 448-463.</em></p>

                <h3>What is Relational Integration?</h3>
                <p>Relational integration is the ability to bind mental representations into complex relational structures. This task measures your capacity to construct and integrate temporary bindings between pieces of information.</p>

                <h3>How It Works:</h3>
                <ul>
                    <li>You'll see a 3√ó3 grid of three-character strings</li>
                    <li>Each trial displays for exactly 5.5 seconds</li>
                    <li>Press SPACE when you detect the target pattern</li>
                    <li>Do NOT respond if the pattern is absent</li>
                    <li>Focus on the <strong>last character</strong> of each string</li>
                </ul>
            </div>

            <div class="config-section">
                <h2>Select Experiment to Replicate</h2>

                <div class="experiment-selector">
                    <div class="experiment-card" data-experiment="1">
                        <h3>Experiment 1</h3>
                        <p class="exp-subtitle">Between-Subjects Design</p>
                        <ul class="exp-details">
                            <li><strong>Conditions:</strong> Choose ONE condition</li>
                            <li><strong>Trials:</strong> 5 training (letters) + 50 letters + 50 numbers</li>
                            <li><strong>Duration:</strong> ~10 minutes</li>
                            <li><strong>Purpose:</strong> Test if bindings (not objects) determine difficulty</li>
                        </ul>
                        <button class="select-exp-btn" data-experiment="1">Select Experiment 1</button>
                    </div>

                    <div class="experiment-card" data-experiment="2">
                        <h3>Experiment 2</h3>
                        <p class="exp-subtitle">Within-Subjects + Interference</p>
                        <ul class="exp-details">
                            <li><strong>Conditions:</strong> Three-Same AND Five-Same</li>
                            <li><strong>Trials:</strong> 10 training + 120 trials per condition (60 letters + 60 numbers)</li>
                            <li><strong>Interference:</strong> Low vs. High (50% each)</li>
                            <li><strong>Duration:</strong> ~25 minutes</li>
                            <li><strong>Purpose:</strong> Test interference effects</li>
                        </ul>
                        <button class="select-exp-btn" data-experiment="2">Select Experiment 2</button>
                    </div>

                    <div class="experiment-card" data-experiment="3">
                        <h3>Experiment 3</h3>
                        <p class="exp-subtitle">Multiple Conditions Within-Subjects</p>
                        <ul class="exp-details">
                            <li><strong>Conditions:</strong> Three-Same, Five-Same, Three-Different</li>
                            <li><strong>Trials:</strong> 80 trials per condition (40 numbers + 40 letters)</li>
                            <li><strong>Order:</strong> Three-Same first, others randomized</li>
                            <li><strong>Duration:</strong> ~25 minutes</li>
                            <li><strong>Purpose:</strong> Compare predictive power of conditions</li>
                        </ul>
                        <button class="select-exp-btn" data-experiment="3">Select Experiment 3</button>
                    </div>
                </div>
            </div>

            <div class="config-section experimental-section">
                <h2>üß† Experimental Training Modes</h2>
                <p class="experimental-note">These modes are designed to potentially train fluid intelligence through various cognitive enhancement strategies. <strong>Note:</strong> Evidence for far transfer to general intelligence is limited and controversial in research.</p>

                <div class="experiment-selector">
                    <div class="experiment-card experimental-card" data-mode="adaptive">
                        <h3>Adaptive Difficulty</h3>
                        <p class="exp-subtitle">AI-Adjusted Challenge Level</p>
                        <ul class="exp-details">
                            <li><strong>Method:</strong> Difficulty adjusts based on performance</li>
                            <li><strong>Start:</strong> 3 objects, 6 seconds</li>
                            <li><strong>Progression:</strong> Automatic based on 80%/60% thresholds</li>
                            <li><strong>Evidence:</strong> Optimal challenge promotes learning</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="adaptive">Try Adaptive Mode</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="progressive">
                        <h3>Progressive Complexity</h3>
                        <p class="exp-subtitle">4-Week Structured Program</p>
                        <ul class="exp-details">
                            <li><strong>Week 1:</strong> 3 objects, 7s, no distractors</li>
                            <li><strong>Week 2:</strong> Mixed 3-5 objects, 6s</li>
                            <li><strong>Week 3:</strong> 5 objects, 5.5s, interference</li>
                            <li><strong>Week 4:</strong> 7 objects (new!), reduced time</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="progressive">Start Week 1</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="speed">
                        <h3>Speed-Accuracy Training</h3>
                        <p class="exp-subtitle">Processing Speed Enhancement</p>
                        <ul class="exp-details">
                            <li><strong>4 Modes:</strong> Accuracy (unlimited) to Blitz (2s)</li>
                            <li><strong>Focus:</strong> Rapid pattern detection</li>
                            <li><strong>Evidence:</strong> Speed highly correlated with Gf</li>
                            <li><strong>Duration:</strong> ~15 minutes per session</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="speed">Configure Speed Mode</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="multirelational">
                        <h3>Multi-Relational</h3>
                        <p class="exp-subtitle">Multiple Dimension Tracking</p>
                        <ul class="exp-details">
                            <li><strong>Challenge:</strong> Track numbers AND colors</li>
                            <li><strong>Task:</strong> Detect if EITHER forms pattern</li>
                            <li><strong>Complexity:</strong> Higher relational load</li>
                            <li><strong>Evidence:</strong> More bindings = better Gf predictor</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="multirelational">Try Multi-Relational</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="nback">
                        <h3>Dual N-Back Hybrid</h3>
                        <p class="exp-subtitle">Combined Task Training</p>
                        <ul class="exp-details">
                            <li><strong>Combine:</strong> Relational integration + N-back</li>
                            <li><strong>Task:</strong> Does current pattern match N trials back?</li>
                            <li><strong>Progression:</strong> 1-back ‚Üí 3-back</li>
                            <li><strong>Evidence:</strong> Dual n-back has some transfer support</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="nback">Start Dual N-Back</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="interference">
                        <h3>Interference Management</h3>
                        <p class="exp-subtitle">Distractor Resistance Training</p>
                        <ul class="exp-details">
                            <li><strong>Level 1:</strong> Clean grids</li>
                            <li><strong>Level 2:</strong> Visual noise (similar symbols)</li>
                            <li><strong>Level 3:</strong> Conflicting partial patterns</li>
                            <li><strong>Level 4:</strong> Time pressure + distractors</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="interference">Build Resistance</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="wmload">
                        <h3>WM Load Variation</h3>
                        <p class="exp-subtitle">Working Memory Challenge</p>
                        <ul class="exp-details">
                            <li><strong>Easy:</strong> 4 items carry over (low WM load)</li>
                            <li><strong>Medium:</strong> 1-4 items (original study)</li>
                            <li><strong>Hard:</strong> 0-1 items (high WM load)</li>
                            <li><strong>Extreme:</strong> All new every trial</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="wmload">Train WM Capacity</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="metacognitive">
                        <h3>Meta-Cognitive Training</h3>
                        <p class="exp-subtitle">Self-Monitoring + Strategy</p>
                        <ul class="exp-details">
                            <li><strong>Confidence:</strong> Rate certainty after each trial</li>
                            <li><strong>Calibration:</strong> Track confidence vs. accuracy</li>
                            <li><strong>Strategies:</strong> Explicit pattern-detection tips</li>
                            <li><strong>Evidence:</strong> Self-monitoring improves learning</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="metacognitive">Enhance Awareness</button>
                    </div>

                    <div class="experiment-card experimental-card" data-mode="gamified">
                        <h3>Gamified Progress</h3>
                        <p class="exp-subtitle">Long-Term Engagement System</p>
                        <ul class="exp-details">
                            <li><strong>Tracking:</strong> Daily streaks, performance graphs</li>
                            <li><strong>Badges:</strong> Bronze ‚Üí Diamond levels</li>
                            <li><strong>Goals:</strong> Session-based achievements</li>
                            <li><strong>Evidence:</strong> Motivation crucial for adherence</li>
                        </ul>
                        <button class="select-exp-btn" data-mode="gamified">View Progress Dashboard</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Experiment 1 Configuration -->
        <div id="exp1-config-screen" class="screen">
            <h1>Experiment 1 Configuration</h1>
            <div class="info-box">
                <p>In Experiment 1, participants were randomly assigned to ONE condition. The goal was to test whether the number of bindings (not the number of objects) determines task difficulty.</p>
            </div>

            <div class="config-section">
                <h2>Select Your Condition</h2>
                <div class="config-option">
                    <label for="exp1-condition">Condition (Between-Subjects):</label>
                    <select id="exp1-condition">
                        <option value="three-same">Three-Same (Find 3 SAME endings in row/column)</option>
                        <option value="five-same">Five-Same (Find 5 SAME endings in cross/T pattern)</option>
                        <option value="three-different">Three-Different (Find 3 DIFFERENT endings in row/column)</option>
                        <option value="five-different">Five-Different (Find 5 DIFFERENT endings in cross/T pattern)</option>
                    </select>
                </div>
                <p class="config-note"><strong>Protocol:</strong> 5 training trials (letters only) ‚Üí 50 letter trials ‚Üí 50 number trials</p>
            </div>

            <div class="button-group">
                <button id="exp1-back-btn" class="btn-secondary">Back</button>
                <button id="exp1-start-btn" class="btn-primary">Start Experiment 1</button>
            </div>
        </div>

        <!-- Experiment 2 Configuration -->
        <div id="exp2-config-screen" class="screen">
            <h1>Experiment 2 Configuration</h1>
            <div class="info-box">
                <p>Experiment 2 tests both Three-Same and Five-Same conditions within the same session, with manipulation of interference levels. This replicates the within-subjects design.</p>
            </div>

            <div class="config-section">
                <h2>Configuration</h2>
                <p class="config-note"><strong>Fixed Conditions:</strong> Three-Same AND Five-Same (order randomized)</p>
                <p class="config-note"><strong>Protocol per condition:</strong> 10 training trials (numbers) ‚Üí 60 number trials ‚Üí 60 letter trials</p>
                <p class="config-note"><strong>Interference:</strong> 50% low-interference trials, 50% high-interference trials (randomized)</p>
                <p class="config-note"><strong>Total Duration:</strong> ~25 minutes</p>
            </div>

            <div class="button-group">
                <button id="exp2-back-btn" class="btn-secondary">Back</button>
                <button id="exp2-start-btn" class="btn-primary">Start Experiment 2</button>
            </div>
        </div>

        <!-- Experiment 3 Configuration -->
        <div id="exp3-config-screen" class="screen">
            <h1>Experiment 3 Configuration</h1>
            <div class="info-box">
                <p>Experiment 3 compares Three-Same, Five-Same, and Three-Different conditions to evaluate their predictive power for fluid reasoning. Note: Five-Different was excluded due to floor effects in pilot testing.</p>
            </div>

            <div class="config-section">
                <h2>Configuration</h2>
                <p class="config-note"><strong>Fixed Conditions:</strong> Three-Same (first), then Five-Same and Three-Different (randomized order)</p>
                <p class="config-note"><strong>Protocol per condition:</strong> 40 number trials ‚Üí 40 letter trials (numbers always first)</p>
                <p class="config-note"><strong>Total Duration:</strong> ~25 minutes</p>
            </div>

            <div class="button-group">
                <button id="exp3-back-btn" class="btn-secondary">Back</button>
                <button id="exp3-start-btn" class="btn-primary">Start Experiment 3</button>
            </div>
        </div>

        <!-- Experimental Mode Configuration Screens -->
        <div id="experimental-config-screen" class="screen">
            <h1 id="exp-mode-title">Experimental Mode</h1>
            <div id="exp-mode-config-content" class="info-box">
                <!-- Dynamically filled based on selected mode -->
            </div>
            <div class="button-group">
                <button id="exp-mode-back-btn" class="btn-secondary">Back</button>
                <button id="exp-mode-start-btn" class="btn-primary">Start Training</button>
            </div>
        </div>

        <!-- Confidence Rating Screen (for metacognitive mode) -->
        <div id="confidence-screen" class="screen">
            <h1>Rate Your Confidence</h1>
            <div class="confidence-container">
                <p class="confidence-question">How confident are you that your response was correct?</p>
                <div class="confidence-scale">
                    <button class="confidence-btn" data-confidence="1">1<br><span>Not at all</span></button>
                    <button class="confidence-btn" data-confidence="2">2<br><span>Slightly</span></button>
                    <button class="confidence-btn" data-confidence="3">3<br><span>Moderately</span></button>
                    <button class="confidence-btn" data-confidence="4">4<br><span>Very</span></button>
                    <button class="confidence-btn" data-confidence="5">5<br><span>Extremely</span></button>
                </div>
                <div id="strategy-tip" class="strategy-tip"></div>
            </div>
        </div>

        <!-- Progress Dashboard (for gamified mode) -->
        <div id="progress-dashboard" class="screen">
            <h1>Training Progress Dashboard</h1>
            <div class="dashboard-container">
                <div class="dashboard-section">
                    <h2>üìä Overall Statistics</h2>
                    <div id="overall-stats" class="stat-grid">
                        <!-- Filled dynamically -->
                    </div>
                </div>

                <div class="dashboard-section">
                    <h2>üî• Streaks & Achievements</h2>
                    <div id="streaks-section">
                        <!-- Filled dynamically -->
                    </div>
                </div>

                <div class="dashboard-section">
                    <h2>üèÜ Badges & Levels</h2>
                    <div id="badges-section">
                        <!-- Filled dynamically -->
                    </div>
                </div>

                <div class="dashboard-section">
                    <h2>üìà Performance Over Time</h2>
                    <div id="performance-chart">
                        <!-- Simple text-based chart -->
                    </div>
                </div>

                <div class="button-group">
                    <button id="dashboard-clear-btn" class="btn-secondary">Clear All Data</button>
                    <button id="dashboard-continue-btn" class="btn-primary">Continue Training</button>
                    <button id="dashboard-back-btn" class="btn-secondary">Back to Menu</button>
                </div>
            </div>
        </div>

        <!-- Instructions Screen -->
        <div id="instructions-screen" class="screen">
            <h1>Instructions</h1>
            <div id="instruction-content" class="info-box">
                <!-- Dynamically filled based on experiment and condition -->
            </div>
            <div class="button-group">
                <button id="back-to-menu-btn" class="btn-secondary">‚Üê Back to Main Menu</button>
                <button id="begin-task-btn" class="btn-primary">Begin</button>
            </div>
        </div>

        <!-- Task Screen -->
        <div id="task-screen" class="screen">
            <div class="task-header">
                <div class="trial-counter">
                    <div class="trial-info">
                        <span id="phase-indicator">Training</span> |
                        <span id="task-type-indicator">Letters</span> |
                        <span id="condition-indicator">Three-Same</span>
                    </div>
                    <div class="trial-progress">
                        Trial: <span id="current-trial">0</span> / <span id="total-trials">5</span>
                        <button id="abort-task-btn" class="abort-btn" title="Return to Main Menu">‚úï</button>
                    </div>
                </div>
                <div class="timer-container">
                    <div class="timer-bar" id="timer-bar"></div>
                </div>
            </div>

            <div id="grid-container" class="grid-container">
                <!-- 3x3 grid will be generated here -->
            </div>

            <div class="task-footer">
                <div class="response-indicator" id="response-indicator"></div>
                <p class="instruction-text desktop-only">Press <strong>SPACE</strong> when you detect the target pattern</p>
                <button id="mobile-response-btn" class="mobile-response-btn">
                    TAP WHEN PATTERN DETECTED
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <h1>Results</h1>
            <div class="results-container">
                <div class="results-summary">
                    <h2>Performance Summary</h2>
                    <div id="results-content">
                        <!-- Dynamically filled based on experiment -->
                    </div>
                </div>

                <div class="results-interpretation">
                    <h3>Interpretation</h3>
                    <div id="interpretation-content"></div>
                    <div class="reference-box">
                        <p><strong>Reference:</strong> Chuderski, A. (2013). The relational integration task explains fluid reasoning above and beyond other working memory tasks. <em>Memory & Cognition, 42</em>(3), 448-463. doi: 10.3758/s13421-013-0366-x</p>
                    </div>
                </div>

                <div class="button-group">
                    <button id="download-results-btn" class="btn-secondary">Download Data (JSON)</button>
                    <button id="restart-btn" class="btn-primary">Return to Start</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
